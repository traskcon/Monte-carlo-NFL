library(nflverse)
source("C:/Users/geniu/Documents/Monte-carlo-NFL/sim_functions.R", echo = TRUE)
get_yardage_data(2024,"pass",export=TRUE)
get_yardage_data(2024,"pass",export=TRUE)
yard_data <- load_pbp(years) |>
filter(play_type == play_type) |>
select(fields)
source("C:/Users/geniu/Documents/Monte-carlo-NFL/sim_functions.R", echo = TRUE)
source("C:/Users/geniu/Documents/Monte-carlo-NFL/sim_functions.R", echo = TRUE)
get_yardage_data(2024,"pass",export=TRUE)
yard_data <- load_pbp(2024)
yard_data <- filter(yard_data, play_type == "pass")
yard_data <- get_yardage_data(2024, "pass")
View(yard_data)
pbp_data <- load_pbp(2024) |> filter(play_type == "pass")
View(pbp_data)
pbp_data <- select(pbp_data, all_of(c("receiver_player_name","receiver_player_id","passer_player_name",
"passer_player_id","complete_pass","air_yards","yards_after_catch",
"yards_gained","defteam","interception")))
View(pbp_data)
source("C:/Users/geniu/Documents/Monte-carlo-NFL/sim_functions.R", echo = TRUE)
get_yardage_data(2024, "pass", export=TRUE)
yard_data <- get_yardage_data(2024, "pass")
fields <- switch(
play_type,
"run"= c("rusher_player_name","rusher_player_id","posteam","defteam","yards_gained"),
"pass"= c("receiver_player_name","receiver_player_id","passer_player_name",
"passer_player_id","complete_pass","air_yards","yards_after_catch",
"yards_gained","defteam","interception"),
"field goal"= c("kicker_player_name","kicker_player_id","yardline_100","result"),
"punt"= c("punter_player_name","punter_player_id","kick_distance"),
"Invalid play type"
)
play_type <- "pass"
fields <- switch(
play_type,
"run"= c("rusher_player_name","rusher_player_id","posteam","defteam","yards_gained"),
"pass"= c("receiver_player_name","receiver_player_id","passer_player_name",
"passer_player_id","complete_pass","air_yards","yards_after_catch",
"yards_gained","defteam","interception"),
"field goal"= c("kicker_player_name","kicker_player_id","yardline_100","result"),
"punt"= c("punter_player_name","punter_player_id","kick_distance"),
"Invalid play type"
)
years <- 2024
yard_data <- load_pbp(years) |>
filter(play_type == play_type) |>
select(all_of(fields))
yard_data <- load_pbp(years) |>
filter(play_type == play_type)
View(yard_data)
help("filter")
yard_data <- load_pbp(years) %>%
filter(play_type == play_type)
test <- yard_data |> filter(play_type == play_type)
source("C:/Users/geniu/Documents/Monte-carlo-NFL/sim_functions.R", echo = TRUE)
yard_data <- get_yardage_data(2024, "pass")
library(tidyverse)
source("C:/Users/geniu/Documents/Monte-carlo-NFL/sim_functions.R", echo = TRUE)
yard_data <- get_yardage_data(2024, "pass")
source("C:/Users/geniu/Documents/Monte-carlo-NFL/sim_functions.R", echo = TRUE)
yard_data <- get_yardage_data(2024, "pass")
View(yard_data)
yard_data <- filter(yard_data, play_type == "pass")
test <- load_pbp(2024) |> filter(play_type == "pass")
play <- "pass"
fields <- switch(
play,
"run"= c("rusher_player_name","rusher_player_id","posteam","defteam","yards_gained"),
"pass"= c("receiver_player_name","receiver_player_id","passer_player_name",
"passer_player_id","complete_pass","air_yards","yards_after_catch",
"yards_gained","defteam","interception"),
"field goal"= c("kicker_player_name","kicker_player_id","yardline_100","result"),
"punt"= c("punter_player_name","punter_player_id","kick_distance"),
"Invalid play type"
)
yard_data <- select(yard_data, all_of(fields))
test <- select(test, all_of(fields))
test <- rename(test, yards_gained_pass = yards_gained)
View(test)
write.csv(test, "./data/pass_data.csv")
play <- "run"
fields <- switch(
play,
"run"= c("rusher_player_name","rusher_player_id","posteam","defteam","yards_gained"),
"pass"= c("receiver_player_name","receiver_player_id","passer_player_name",
"passer_player_id","complete_pass","air_yards","yards_after_catch",
"yards_gained","defteam","interception"),
"field goal"= c("kicker_player_name","kicker_player_id","yardline_100","result"),
"punt"= c("punter_player_name","punter_player_id","kick_distance"),
"Invalid play type"
)
yard_data <- load_pbp(years) |>
filter(play_type == play) |>
select(all_of(fields))
years <- 2024
yard_data <- load_pbp(years) |>
filter(play_type == play) |>
select(all_of(fields))
yard_data <- load_pbp(2024) |> filter(play_type == "run") |> select(all_of(fields))
yard_data <- rename(yard_data, yards_gained_rush = yards_gained)
View(yard_data)
write.csv(yard_data, paste0("./data/", play_type,"_data.csv"))
write.csv(yard_data, paste0("./data/", play,"_data.csv"))
yard_data <- get_yardage_data(2024, "pass")
yard_data <- get_yardage_data(years=2024, play="pass")
